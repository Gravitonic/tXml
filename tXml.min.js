function tXml(b,c){function e(){for(var c=[];b[a];){if(60==b.charCodeAt(a)){if(47===b.charCodeAt(a+1)){a=b.indexOf(">",a);break}else if(33===b.charCodeAt(a+1)){if(45==b.charCodeAt(a+2)){for(;62!==b.charCodeAt(a)||45!=b.charCodeAt(a-1)||45!=b.charCodeAt(a-2)||-1==a;)a=b.indexOf(">",a+1);-1===a&&(a=b.length)}else for(a+=2;62!==b.charCodeAt(a);)a++;a++;continue}var g=h();c.push(g)}else g=a,a=b.indexOf("<",a)-1,-2===a&&(a=b.length),g=b.slice(g,a+1),0<g.trim().length&&c.push(g);a++}return c}function g(){for(var g=
a;-1===l.indexOf(b[a]);)a++;return b.slice(g,a)}function h(){var c={};a++;c.tagName=g();for(var f=!1;62!==b.charCodeAt(a);){var d=b.charCodeAt(a);if(64<d&&91>d||96<d&&123>d){for(var h=g(),d=b.charCodeAt(a);39!==d&&34!==d&&!(64<d&&91>d||96<d&&123>d)&&62!==d;)a++,d=b.charCodeAt(a);f||(c.attributes={},f=!0);if(39===d||34===d){var d=b[a],k=++a;a=b.indexOf(d,k);d=b.slice(k,a)}else d=null,a--;c.attributes[h]=d}a++}47!==b.charCodeAt(a-1)&&("script"==c.tagName?(f=a+1,a=b.indexOf("\x3c/script>",a),c.children=
[b.slice(f,a-1)],a+=8):"style"==c.tagName?(f=a+1,a=b.indexOf("</style>",a),c.children=[b.slice(f,a-1)],a+=7):-1==m.indexOf(c.tagName)&&(a++,c.children=e(h)));return c}c=c||{};var l="\n\t>/= ",m=["img","br","input","meta","link"],f=null;if(c.searchId){var a=(new RegExp("s*ids*=s*['\"]"+c.searchId+"['\"]")).exec(b).index;-1!==a&&(a=b.lastIndexOf("<",a),-1!==a&&(f=h()));return a}a=0;f=e();c.filter&&(f=tXml.filter(f,c.filter));c.simplify&&(f=tXml.simplefy(f));return f}
tXml.simplify=function(b){var c={};if(1===b.length&&"string"==typeof b[0])return b[0];b.forEach(function(b){c[b.tagName]||(c[b.tagName]=[]);if("object"==typeof b){var e=tXml.simplefy(b.children);c[b.tagName].push(e);b.attributes&&(e._attributes=b.attributes)}else c[b.tagName].push(b)});for(var e in c)1==c[e].length&&(c[e]=c[e][0]);return c};tXml.filter=function(b,c){var e=[];b.forEach(function(b){"object"===typeof b&&c(b)&&e.push(b);b.children&&(b=tXml.filter(b.children,c),e=e.concat(b))});return e};
"object"!==typeof window&&(module.exports=tXml);